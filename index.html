<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <title>Guest book</title>
    <script type="text/javascript">
        // отправка запроса
        function submitData() {
            var xmlHttpObj = window.XMLHttpRequest ? new XMLHttpRequest() : false; // создание объекта XHR
            if (!xmlHttpObj)
                return;
            xmlHttpObj.open('POST', '/upload');
            // добавление заголовка в запрос
            xmlHttpObj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');        
            // обработчик изменения состояния запроса
            xmlHttpObj.onreadystatechange = function () {
                if (xmlHttpObj.readyState == 4 && xmlHttpObj.status == 200){
                    alert(xmlHttpObj.responseText);
                }
            };
            xmlHttpObj.send('name=' + document.data.name.value +
             '&mail=' +  document.data.mail.value +
             '&text=' + document.data.text.value
            );
        }
        window.onload = function () {
            // обработчик отправки формы
            document.data.onsubmit = submitData;
        }
    </script>
</head>
<body>
    <form name="data" method="post">
        <p>
            <b>Ваше имя:</b><br>
            <input type="text" name="name" size="20" required/>
        </p>
        <p>
            <b>Ваш e-mail:</b><br>
            <input type="text" name="mail" size="20" required/>
        </p>
        <p>
            Комментарий<br>
            <textarea name="text" rows="5" cols="20" required></textarea>
        </p>
        <input type="submit" value="Отправить" />
        <input type="reset" value="Очистить">
    </form>        
    <hr>    
</body>
</html>
